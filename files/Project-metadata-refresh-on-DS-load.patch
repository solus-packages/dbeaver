From 268d8c8b57779f67f19530ee49c20a2343f2e9d8 Mon Sep 17 00:00:00 2001
From: Serge Rider <serge@jkiss.org>
Date: Mon, 9 Sep 2019 15:23:15 +0300
Subject: [PATCH] #6700 Project metadata refresh on DS load
NOTE: remove this patch for versions greater than 6.2.0

---
 .../src/org/jkiss/dbeaver/registry/DataSourceRegistry.java       | 1 +
 1 file changed, 1 insertion(+)

diff --git a/plugins/org.jkiss.dbeaver.registry/src/org/jkiss/dbeaver/registry/DataSourceRegistry.java b/plugins/org.jkiss.dbeaver.registry/src/org/jkiss/dbeaver/registry/DataSourceRegistry.java
index 833da3eeee..fbd1ca0d33 100644
--- a/plugins/org.jkiss.dbeaver.registry/src/org/jkiss/dbeaver/registry/DataSourceRegistry.java
+++ b/plugins/org.jkiss.dbeaver.registry/src/org/jkiss/dbeaver/registry/DataSourceRegistry.java
@@ -553,6 +553,7 @@ private void loadDataSources(boolean refresh) {
             boolean modernFormat = false;
             IFolder metadataFolder = project.getMetadataFolder(false);
             if (metadataFolder.exists()) {
+                metadataFolder.refreshLocal(IResource.DEPTH_INFINITE, new NullProgressMonitor());
                 for (IResource res : metadataFolder.members(IContainer.INCLUDE_HIDDEN)) {
                     if (res instanceof IFile && res.exists() &&
                         res.getName().startsWith(MODERN_CONFIG_FILE_PREFIX) && res.getName().endsWith(MODERN_CONFIG_FILE_EXT)) {
